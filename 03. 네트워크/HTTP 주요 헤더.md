# HTTP 주요 헤더 
## 요청 메시지에서 주로 활용되는 HTTP 헤더

### 1. Host 
- **요청을 보낼 호스트가 명시**됨
- 도메인 네임 or IP 주소로 표현됨 (포트 번호가 포함될 수도 있음)
- Host 헤더와 요청 라인을 조합하면 요청을 보낸 URL을 짐작할 수 있는 경우가 많음 

``` 
🔎 Question

Q. 방화벽이 있을 때는 Host 헤더에 어떤 영향을 끼칠까? 
A. 방화벽이 있을 경우, Host 헤더는 요청이 차단되거나 허용되는 기준이 될 수 있습니다. 
방화벽이 특정 도메인이나 IP를 차단하면,Host 헤더에 해당 정보가 포함된 요청은 차단될 수 있습니다. 
반대로 허용된 도메인이라면 요청이 통과할 수 있습니다.
```

### 2. User-Agent
- 요청 메시지를 보낸 클라이언트의 프로그램과 관련한 정보가 명시됨 
- 예를 들면, 사용된 브라우저의 종류, 운영체제, 렌더링 엔진 종류 등이 명시될 수 있음 
- **HTTP 요청 메시지를 보낸 클라이언트의 접속 수단 (ex 브라우저)을 유추할 수 있음**

```
🔎 Question

Q. User Agent로 브라우저 외엔 어떤 프로그램이 존재할까? 
A. 여러 클라이언트가 존재. 대표적인 예시로는 API 테스트 도구나 라이브러리에서 보내는 요청이 존재 (Postman, cURL)

Q. cURL이 무엇인가? 
A. "Client URL"의 약자로, 명령줄에서 HTTP, HTTPS, FTP 등의 프로토콜을 사용하여 데이터를 전송하거나 가져오는 도구

```



### 3. Referer
- 클라이언트가 요청을 보낼 때 머무르던 URL이 명시됨 
- 이를 통해 클라이언트의 유입 경로를 파악할 수 있음 

```
🔎 Question

Q. Host Header와 Referer Header는 다른 것 인가? 
A. Host Header는 요청을 보낸 서버의 도메인 정보를 가지고 Referer Header는 직전에 머문 URL 전체 정보를 가짐. 

Q. 블로그에서 유입 경로 확인할 때 해당 헤더를 이용하나? 
A. Yes 

Q. 바로 직전에 머물렀던 URL만 확인 가능한가? 
A. Yes 
But 공란인 경우도 있음 
예를들어 HTTPS 에서 HTTP로 이동할 떄 or 사용자 브라우저에서 Referer 설정을 비활성화할 때 등 



```



## 응답 메시지에서 주로 활용되는 HTTP 헤더
### 1. Server  
- HTTP 응답 메시지를 보내는 서버 호스트와 관련된 정보가 명시됨 
- 예를들어 운영체제 정보 등이 담김 

```
🔎 Question

Q. 해당 헤더를 이용할 때 보안상의 문제가 없을까? 
A. 문제 있음. 
server에 담긴 정보의 보안 취약성을 이용하여 공격을 해올 수 있음. 
서버 종류에 맞게 server 헤더의 정보를 변경하거나 숨길 수 있다. 

Q. 그럼 어떤 경우에 해당 설정을 활성화해야 할까? 
A. 디버깅, 로깅 등으로 사용이 가능 
하지만 보안상의 이슈가 있을 수 있으므로 항상 조심해서 사용해야 함

```

---
### 2. Allow 
- 리소스가 지원하는 메소드 집합을 나열
- 주로 405 코드 (Method Not Allowed)와 함께 사용됨. 
- 예를 들어, 서버에서 사용 가능한 메서드가 POST, GET인데 사용자가 DELETE Method로 요청을 보냈을 경우 이용 가능
- `Allow: POST, GET`과 같이 어떤 메서드가 사용 가능한지 사용자에게 공유 가능 
- 비어있는 Allow 헤더는 리소스가 어떤 요청 메소드도 허용하지 않음을 의미

```
🔎 Question

Q. Allow 외에도 특정 HTTP 상태 코드와 함께 자주 사용되는 헤더가 있을까?
A. 
1. 401(Unauthorized) - WWW-Authenticate
  - 클라이언트가 인증에 실패했을 때, 서버가 어떤 인증 방식이 필요한지 알려줌 
2. 301(Moved Permanently) / 302(Found) - Location
  - 클라이언트가 요청한 리소스가 이동했음을 알리고, 새로운 URL을 Location 헤더에 포함하여 전달
3. 304(Not Modified) - ETag, Last-Modified
  - 캐싱 관련 상태 코드 
  - 클라이언트가 요청한 리소스가 변경되지 않았음을 나타냄 
4. 429(Too Many Requests) - Retry-After  
  - 클라이언트가 너무 많은 요청을 보냈을 때, 서버가 다시 요청할 수 있는 시간을 알려줌 
5. 206(Partial Content) - Content-Range
  - 클라이언트가 요청한 리소스의 특정 부분만 반환할 때 사용 

```

### 3. Location
- 클라이언트에게 자원의 위치를 알려 주기 위해 사용
- 주로 리다이렉션이 발생했을 때나 새로운 자원이 생성되었을 때 사용됨  

```
🔎 Question

Q. 3번 이동 후 뒤로가기 누를 때 마다 이전에 이동한 경로 값들이 Location에 담기나 ?  
A. 
Location 헤더는 서버가 응답을 보낼 때 주는 정보이므로, 
클라이언트의 브라우저에서 "뒤로 가기" 버튼을 눌렀을 때 이전에 이동한 경로들이 
자동으로 Location 헤더에 담기는 것은 아닙니다.

Q. 리다이렉션이 뭐야 ? 
A. 클라이언트가 요청한 URL에 대해 서버가 다른 URL로의 이동을 지시하는 HTTP 응답 방식
```




## 요청, 응답 메시지 모두에서 활용되는 HTTP 헤더 

### 1. Date
- 메시지가 생성된 날짜와 시각에 관련된 정보


### 2. Content-Length
- 메시지 본문의 바이트 단위 크기(길이)를 표현하기 위해 사용 


### 3. 표현 헤더 (Content-Type, Content-Language, Content-Encoding)
- 메시지 **본문**이 어떻게 표현되었는지와 관련된 헤더라서 표현 헤더라고 부르기도 함
- Content-Type은 메시지 본문에서 사용된 미디어 타입을 의미 
- Content-Language 헤더는 언어 코드와 국가 코드의 조합을 통해 어떤 국가에서 사용하는 어떤 언어인지를 알 수 있음 
- 예를 들어 ko-KR, en-GB (영국에서 사용하는 영어) 
- Content-Encoding은 메시지 본문을 압축하거나 변환한 방식이 명시됨 


### 4. Connection
- HTTP 메시지를 송신하는 호스트가 어떤 방식의 연결을 원하는지 명시하는 헤더 
- 예를 들면 keep-alive를 명시하여 지속 연결을 희망함, close 명시하여 연결 종료를 희망함 
- Keep-Alive는 TCP 연결을 재사용하여 성능을 최적화하는 기능
- 매 요청마다 새로운 TCP 연결을 맺으면 네트워크 지연이 커지고 성능이 저하됨
- Keep-Alive를 사용하면 핸드셰이크 오버헤드를 줄이고 더 빠른 속도로 요청을 처리할 수 있음